{% extends "base.html" %}

{% block title %}Node List{% endblock %}

{% block content %}
<h1>Node list</h1>
<table border="0" width="750">
  <tr>
    <td width="150"><b>Node name</b></td>
    <td width="100"><b>IP</b></td>
    <td width="200"><b>Last seen up</b></td>
    <td width="100"><b>Status</b></td>
    <td width="50" align="center"><b>Peers</b></td>
    <td width="50" align="center"><b>MIN</b></td>
    <td width="50" align="center"><b>AVG</b></td>
    <td width="50" align="center"><b>MAX</b></td>
  </tr>
  {% for node in nodes %}
  {% ifchanged node.system_node %}
  <tr class="section_title">
    <td colspan="8"><b>{% if node.system_node %}System nodes{% else %}Other nodes{% endif %}</b></td>
  </tr>
  {% endifchanged %}
  <tr> <!-- TODO - If node has 'warnings' flag, display an icon -->
    <td><a href="/nodes/node/{{ node.ip }}">{{ node.name|default:"unknown" }}</a></td>
    <td>{{ node.ip }}</td>
    <td>{{ node.last_seen|default:"?" }}</td>
    <td class="node_status_{{ node.status_as_string }}">{{ node.status_as_string }}</td>
    <td align="center">{{ node.peers }}</td>
    <td align="center">{{ node.rtt_min|default:"/" }}</td>
    <td align="center">{{ node.rtt_avg|default:"/" }}</td>
    <td align="center">{{ node.rtt_max|default:"/" }}</td>
  </tr>
  {% endfor %}
</table>
{% endblock %}
